local hook: (any, ...any) -> any;
local Player: Player = game:GetService("Players").LocalPlayer;

local insert:  (<V>({V}, V) -> ()) & (<V>({V}, number, V) -> ()) = table.insert;
local ReplicatedStorage = game:GetService("ReplicatedStorage");

local function Bypass(): ()
    local Connections: {{ [any]: Connection }} = {};
    insert(Connections, getconnections(Player.Character.DescendantAdded));

    insert(Connections, getconnections(workspace:GetPropertyChangedSignal("Gravity")));
    insert(Connections, getconnections(ReplicatedStorage["_CS.Events"].ToolEvent.OnClientEvent));

    for Value,Connection in Connections do
        for _,ActualConnection in Connection do
            ActualConnection:Disable();
            ActualConnection = nil;
        end;
    end;
end;

hook = hookfunction(getrawmetatable(game).__namecall, newcclosure(function(Self, ...): any
    local Method: string = getnamecallmethod();
    local CallingScript: (LocalScript | ModuleScript)? = getcallingscript();

    if not checkcaller() and Method == "SetPrimaryPartCFrame" then
        return
    end;

    if Method == "FindPartOnRayWithWhitelist" and tostring(CallingScript) == "GunHandlerLocal" then
        return coroutine.yield(coroutine.running());
    end;

    return hook2(Self, ...);
end));

Bypass();
Player.CharacterAdded:Connect(Bypass)
